{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/components/home/home.component.ts","./src/app/components/home/home.component.html","./src/app/services/database-access.service.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":"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","file":"main-es2015.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\n\nconst routes: Routes = [];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'frontend';\n}\n","<router-outlet></router-outlet>\n","import { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { NgModule } from '@angular/core';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { HomeComponent } from './components/home/home.component';\nimport { Routes, RouterModule } from '@angular/router';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatListModule } from '@angular/material/list';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nconst appRoutes: Routes = [\n\n\t{ path: '', redirectTo: 'home', pathMatch: 'full' },\n\t{ path: 'home/:filter', component: HomeComponent },\n\t{ path: 'home', component: HomeComponent }\n]\n\n@NgModule({\n\tdeclarations: [\n\t\tAppComponent,\n\t\tHomeComponent\n\t],\n\timports: [\n\t\tBrowserModule,\n\t\tBrowserAnimationsModule,\n\t\tHttpClientModule,\n\t\tAppRoutingModule,\n\t\tRouterModule.forRoot(\n\t\t\tappRoutes,\n\t\t\t{ enableTracing: false }\t// <-- debugging purposes only\n\t\t),\n\t\tMatToolbarModule,\n\t\tMatIconModule,\n\t\tMatListModule,\n\t\tMatSidenavModule,\n\t\tMatButtonModule,\n\t\tMatSelectModule,\n\t\tMatFormFieldModule,\n\t\tFormsModule,\n\t\tReactiveFormsModule,\n\t],\n\tproviders: [],\n\tbootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport * as L from 'leaflet';\r\nimport { segments } from '../../../assets/coordenadas/exportFilteredGeoJson.js';\r\nimport { DatabaseAccessService } from '../../services/database-access.service'\r\nimport { ActivatedRoute } from '@angular/router';\r\n\r\ninterface Filter {\r\n\tname: string;\r\n\tvalue: string;\r\n\toptions: option[];\r\n}\r\n\r\ninterface option {\r\n\tvalue: string;\r\n\tviewValue: string;\r\n}\r\n\r\n@Component({\r\n\tselector: 'app-home',\r\n\ttemplateUrl: './home.component.html',\r\n\tstyleUrls: ['./home.component.css']\r\n})\r\nexport class HomeComponent implements OnInit {\r\n\r\n\tprivate map;\r\n\tprivate layerGroup = new L.LayerGroup();\r\n\tprivate filter: string;\r\n\r\n\tpublic allFilters: string[] = [\r\n\t\t\"morning\",\r\n\t\t\"spring\",\r\n\t\t\"male\",\r\n\t\t\"adult\",\r\n\t\t\"citizen\"\r\n\t];\r\n\r\n\tfilters: Filter[] = [\r\n\t\t{\r\n\t\t\tname: \"Time section\", value: \"time\", options: [\r\n\t\t\t\t{ value: \"morning\", viewValue: \"6:00h - 13:00h\" },\r\n\t\t\t\t{ value: \"afternoon\", viewValue: \"13:00h - 21:00h\" },\r\n\t\t\t\t{ value: \"night\", viewValue: \"21:00h - 6:00h\" }\r\n\t\t\t]\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"Season\", value: \"season\", options: [\r\n\t\t\t\t{ value: \"spring\", viewValue: \"Spring\" },\r\n\t\t\t\t{ value: \"summer\", viewValue: \"Summer\" },\r\n\t\t\t\t{ value: \"autumn\", viewValue: \"Autumn\" },\r\n\t\t\t\t{ value: \"winter\", viewValue: \"Winter\" }\r\n\t\t\t]\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"Gender\", value: \"gender\", options: [\r\n\t\t\t\t{ value: \"male\", viewValue: \"Male\" },\r\n\t\t\t\t{ value: \"female\", viewValue: \"Female\" },\r\n\t\t\t\t{ value: \"othergender\", viewValue: \"Other\" }\r\n\t\t\t]\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"Age range\", value: \"age\", options: [\r\n\t\t\t\t{ value: \"child\", viewValue: \"0 - 18\" },\r\n\t\t\t\t{ value: \"adult\", viewValue: \"18 - 65\" },\r\n\t\t\t\t{ value: \"old\", viewValue: \"Greater than 65\" }\r\n\t\t\t]\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"User type\", value: \"type\", options: [\r\n\t\t\t\t{ value: \"citizen\", viewValue: \"Citizen\" },\r\n\t\t\t\t{ value: \"tourist\", viewValue: \"Tourist\" }\r\n\t\t\t]\r\n\t\t}\r\n\t]\r\n\r\n\tconstructor(private dbService: DatabaseAccessService) { }\r\n\r\n\tngOnInit() {\r\n\t\tthis.map = L.map(\"map\").setView([41.649914, -0.877733], 13);\r\n\t\tL.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\r\n\t\t\tattribution:\r\n\t\t\t\t'Â© <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n\t\t}).addTo(this.map);\r\n\t\tthis.refreshMap();\r\n\t}\r\n\r\n\t//Returns the segment style\r\n\tstyle(emotion: number) {\r\n\t\tvar color;\r\n\t\tswitch (emotion) {\r\n\t\t\tcase 1:\r\n\t\t\t\tcolor = 'orange';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tcolor = 'red';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tcolor = 'blue';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 4:\r\n\t\t\t\tcolor = 'green';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 5:\r\n\t\t\t\tcolor = 'white'\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tcolor = 'black'\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\t/* weight: 12, */\r\n\t\t\tweight: 4,\r\n\t\t\topacity: 5,\r\n\t\t\tcolor: color,\r\n\t\t\tdashArray: '1',\r\n\t\t\tfillOpacity: 0\r\n\t\t};\r\n\t}\r\n\r\n\t//Transforms a json segment into a geojson segment\r\n\ttoGeoJson(segment) {\r\n\t\tvar geojson = {};\r\n\t\tgeojson['properties'] = segment;\r\n\t\tgeojson['type'] = \"Feature\";\r\n\t\tgeojson['geometry'] = {\r\n\t\t\t\"type\": \"LineString\",\r\n\t\t\t\"coordinates\": segment['segment']['coordinates']\r\n\t\t}\r\n\r\n\t\treturn geojson;\r\n\t}\r\n\r\n\t// Removes the painted layer\r\n\tremoveLayers(): void {\r\n\t\tthis.map.removeLayer(this.layerGroup);\r\n\t\tthis.layerGroup = new L.LayerGroup();;\r\n\t}\r\n\r\n\t// Removes the painted layer and paints the new one\r\n\trefreshMap(): void {\r\n\t\tthis.removeLayers();\r\n\t\tthis.filter = this.allFilters[0];\r\n\t\tfor (var i = 1; i < 5; i++) {\r\n\t\t\tthis.filter += \".\" + this.allFilters[i];\r\n\t\t}\r\n\t\tthis.buildSegments();\r\n\t}\r\n\r\n\t//Given a segment, is painted in the map\r\n\tpaintSegment(segment, emotion: number) {\r\n\t\tL.geoJSON(segment, { style: this.style(emotion) })\r\n\t\t\t.addTo(this.layerGroup);\r\n\t}\r\n\r\n\t//Paints in the map the segments which are related to a emotion\r\n\tbuildSegments() {\r\n\t\tthis.dbService.getEmotionsFiltered(this.filter)\r\n\t\t\t.subscribe(res => {\r\n\t\t\t\tres['data'].forEach(segment => {\r\n\t\t\t\t\tvar mostRepeated: number = 0;\r\n\t\t\t\t\tfor (var j = 0; j < 5; j++) {\r\n\t\t\t\t\t\tif (segment.emotions[mostRepeated] < segment.emotions[j]) {\r\n\t\t\t\t\t\t\tmostRepeated = j;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar emotion: number = mostRepeated + 1;\r\n\t\t\t\t\tthis.dbService.getSegmentByWay(segment._id)\r\n\t\t\t\t\t\t.subscribe(res => {\r\n\t\t\t\t\t\t\tthis.paintSegment(res['coordinates'], emotion);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\terr => {\r\n\t\t\t\t\t\t\t\tconsole.log(\"Error at getSegmentByWay\")\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\tthis.layerGroup.addTo(this.map);\r\n\t\t\t},\r\n\t\t\t\terr => {\r\n\t\t\t\t\tconsole.log(\"Error at getAllEmotions\")\r\n\t\t\t\t});\r\n\t}\r\n}\r\n","<!DOCTYPE html>\n<html lang=\"es\">\n\n<head>\n\t<link rel=\"stylesheet\" href=\"http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css\" />\n</head>\n\n<body>\n\t<div class=\"header\">\n\t\t<mat-toolbar class=\"toolbar\">\n\t\t\t<h1 class=\"title\">Emotions map</h1>\n\t\t\t<div class=\"selectors\">\n\t\n\t\t\t\t<select *ngFor=\"let f of filters; let i=index\" [(ngModel)]=\"allFilters[i]\" class=\"filter\">\n\t\t\t\t\t<option *ngFor=\"let opt of f.options\" value={{opt.value}}>{{opt.viewValue}}</option>\n\t\t\t\t</select>\n\t\n\t\t\t\t<button (click)=\"refreshMap()\">Filter</button>\n\t\t\t</div>\n\t\t</mat-toolbar>\n\t</div>\n\t<div id=\"map\">\n\t</div>\n</body>\n\n</html>","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError, retry } from 'rxjs/operators';\n\nconst apiURL = 'http://localhost:3000';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class DatabaseAccessService {\n\n\tprivate emotions;\n\n\tconstructor(private http: HttpClient) { }\n\n\tgetAllEmotions() {\n\t\treturn this.http.get(apiURL + '/getAllEmotions', { responseType: 'json' });\n\t}\n\n\tgetSegmentByWay(way) {\n\t\treturn this.http.get(apiURL + '/getSegmentByWay/' + way, { responseType: 'json' });\n\t}\n\n\tgetEmotionsFiltered(filter: String) {\n\t\treturn this.http.get(apiURL + '/getEmotionsFiltered/' + filter, { responseType: 'json' });\n\t}\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":"webpack:///"}