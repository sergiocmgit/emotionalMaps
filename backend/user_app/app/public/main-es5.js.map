{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/components/home/home.component.ts","webpack:///src/app/components/home/home.component.html","webpack:///src/app/services/database-access.service.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","routes","AppRoutingModule","forRoot","imports","AppComponent","title","selector","templateUrl","styleUrls","appRoutes","path","redirectTo","pathMatch","component","AppModule","enableTracing","declarations","providers","bootstrap","value","HomeComponent","dbService","layerGroup","allFilters","filters","name","options","viewValue","map","setView","attribution","addTo","refreshMap","emotion","color","weight","opacity","dashArray","fillOpacity","segment","geojson","removeLayer","removeLayers","filter","i","buildSegments","style","getEmotionsFiltered","subscribe","res","forEach","mostRepeated","j","emotions","getSegmentByWay","_id","paintSegment","err","console","log","apiURL","DatabaseAccessService","http","get","responseType","way","providedIn","environment","production","bootstrapModule","error"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\n\nconst routes: Routes = [];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'frontend';\n}\n","<router-outlet></router-outlet>\n","import { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { NgModule } from '@angular/core';\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { HomeComponent } from './components/home/home.component';\nimport { Routes, RouterModule } from '@angular/router';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatListModule } from '@angular/material/list';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nconst appRoutes: Routes = [\n\n\t{ path: '', redirectTo: 'home', pathMatch: 'full' },\n\t{ path: 'home/:filter', component: HomeComponent },\n\t{ path: 'home', component: HomeComponent }\n]\n\n@NgModule({\n\tdeclarations: [\n\t\tAppComponent,\n\t\tHomeComponent\n\t],\n\timports: [\n\t\tBrowserModule,\n\t\tBrowserAnimationsModule,\n\t\tHttpClientModule,\n\t\tAppRoutingModule,\n\t\tRouterModule.forRoot(\n\t\t\tappRoutes,\n\t\t\t{ enableTracing: false }\t// <-- debugging purposes only\n\t\t),\n\t\tMatToolbarModule,\n\t\tMatIconModule,\n\t\tMatListModule,\n\t\tMatSidenavModule,\n\t\tMatButtonModule,\n\t\tMatSelectModule,\n\t\tMatFormFieldModule,\n\t\tFormsModule,\n\t\tReactiveFormsModule,\n\t],\n\tproviders: [],\n\tbootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport * as L from 'leaflet';\r\nimport { segments } from '../../../assets/coordenadas/exportFilteredGeoJson.js';\r\nimport { DatabaseAccessService } from '../../services/database-access.service'\r\nimport { ActivatedRoute } from '@angular/router';\r\n\r\ninterface Filter {\r\n\tname: string;\r\n\tvalue: string;\r\n\toptions: option[];\r\n}\r\n\r\ninterface option {\r\n\tvalue: string;\r\n\tviewValue: string;\r\n}\r\n\r\n@Component({\r\n\tselector: 'app-home',\r\n\ttemplateUrl: './home.component.html',\r\n\tstyleUrls: ['./home.component.css']\r\n})\r\nexport class HomeComponent implements OnInit {\r\n\r\n\tprivate map;\r\n\tprivate layerGroup = new L.LayerGroup();\r\n\tprivate filter: string;\r\n\r\n\tpublic allFilters: string[] = [\r\n\t\t\"morning\",\r\n\t\t\"spring\",\r\n\t\t\"male\",\r\n\t\t\"adult\",\r\n\t\t\"citizen\"\r\n\t];\r\n\r\n\tfilters: Filter[] = [\r\n\t\t{\r\n\t\t\tname: \"Time section\", value: \"time\", options: [\r\n\t\t\t\t{ value: \"morning\", viewValue: \"6:00h - 13:00h\" },\r\n\t\t\t\t{ value: \"afternoon\", viewValue: \"13:00h - 21:00h\" },\r\n\t\t\t\t{ value: \"night\", viewValue: \"21:00h - 6:00h\" }\r\n\t\t\t]\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"Season\", value: \"season\", options: [\r\n\t\t\t\t{ value: \"spring\", viewValue: \"Spring\" },\r\n\t\t\t\t{ value: \"summer\", viewValue: \"Summer\" },\r\n\t\t\t\t{ value: \"autumn\", viewValue: \"Autumn\" },\r\n\t\t\t\t{ value: \"winter\", viewValue: \"Winter\" }\r\n\t\t\t]\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"Gender\", value: \"gender\", options: [\r\n\t\t\t\t{ value: \"male\", viewValue: \"Male\" },\r\n\t\t\t\t{ value: \"female\", viewValue: \"Female\" },\r\n\t\t\t\t{ value: \"othergender\", viewValue: \"Other\" }\r\n\t\t\t]\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"Age range\", value: \"age\", options: [\r\n\t\t\t\t{ value: \"child\", viewValue: \"0 - 18\" },\r\n\t\t\t\t{ value: \"adult\", viewValue: \"18 - 65\" },\r\n\t\t\t\t{ value: \"old\", viewValue: \"Greater than 65\" }\r\n\t\t\t]\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: \"User type\", value: \"type\", options: [\r\n\t\t\t\t{ value: \"citizen\", viewValue: \"Citizen\" },\r\n\t\t\t\t{ value: \"tourist\", viewValue: \"Tourist\" }\r\n\t\t\t]\r\n\t\t}\r\n\t]\r\n\r\n\tconstructor(private dbService: DatabaseAccessService) { }\r\n\r\n\tngOnInit() {\r\n\t\tthis.map = L.map(\"map\").setView([41.649914, -0.877733], 13);\r\n\t\tL.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\r\n\t\t\tattribution:\r\n\t\t\t\t'© <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n\t\t}).addTo(this.map);\r\n\t\tthis.refreshMap();\r\n\t}\r\n\r\n\t//Returns the segment style\r\n\tstyle(emotion: number) {\r\n\t\tvar color;\r\n\t\tswitch (emotion) {\r\n\t\t\tcase 1:\r\n\t\t\t\tcolor = 'orange';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tcolor = 'red';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tcolor = 'blue';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 4:\r\n\t\t\t\tcolor = 'green';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 5:\r\n\t\t\t\tcolor = 'white'\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tcolor = 'black'\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\t/* weight: 12, */\r\n\t\t\tweight: 4,\r\n\t\t\topacity: 5,\r\n\t\t\tcolor: color,\r\n\t\t\tdashArray: '1',\r\n\t\t\tfillOpacity: 0\r\n\t\t};\r\n\t}\r\n\r\n\t//Transforms a json segment into a geojson segment\r\n\ttoGeoJson(segment) {\r\n\t\tvar geojson = {};\r\n\t\tgeojson['properties'] = segment;\r\n\t\tgeojson['type'] = \"Feature\";\r\n\t\tgeojson['geometry'] = {\r\n\t\t\t\"type\": \"LineString\",\r\n\t\t\t\"coordinates\": segment['segment']['coordinates']\r\n\t\t}\r\n\r\n\t\treturn geojson;\r\n\t}\r\n\r\n\t// Removes the painted layer\r\n\tremoveLayers(): void {\r\n\t\tthis.map.removeLayer(this.layerGroup);\r\n\t\tthis.layerGroup = new L.LayerGroup();;\r\n\t}\r\n\r\n\t// Removes the painted layer and paints the new one\r\n\trefreshMap(): void {\r\n\t\tthis.removeLayers();\r\n\t\tthis.filter = this.allFilters[0];\r\n\t\tfor (var i = 1; i < 5; i++) {\r\n\t\t\tthis.filter += \".\" + this.allFilters[i];\r\n\t\t}\r\n\t\tthis.buildSegments();\r\n\t}\r\n\r\n\t//Given a segment, is painted in the map\r\n\tpaintSegment(segment, emotion: number) {\r\n\t\tL.geoJSON(segment, { style: this.style(emotion) })\r\n\t\t\t.addTo(this.layerGroup);\r\n\t}\r\n\r\n\t//Paints in the map the segments which are related to a emotion\r\n\tbuildSegments() {\r\n\t\tthis.dbService.getEmotionsFiltered(this.filter)\r\n\t\t\t.subscribe(res => {\r\n\t\t\t\tres['data'].forEach(segment => {\r\n\t\t\t\t\tvar mostRepeated: number = 0;\r\n\t\t\t\t\tfor (var j = 0; j < 5; j++) {\r\n\t\t\t\t\t\tif (segment.emotions[mostRepeated] < segment.emotions[j]) {\r\n\t\t\t\t\t\t\tmostRepeated = j;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar emotion: number = mostRepeated + 1;\r\n\t\t\t\t\tthis.dbService.getSegmentByWay(segment._id)\r\n\t\t\t\t\t\t.subscribe(res => {\r\n\t\t\t\t\t\t\tthis.paintSegment(res['coordinates'], emotion);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\terr => {\r\n\t\t\t\t\t\t\t\tconsole.log(\"Error at getSegmentByWay\")\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\tthis.layerGroup.addTo(this.map);\r\n\t\t\t},\r\n\t\t\t\terr => {\r\n\t\t\t\t\tconsole.log(\"Error at getAllEmotions\")\r\n\t\t\t\t});\r\n\t}\r\n}\r\n","<!DOCTYPE html>\n<html lang=\"es\">\n\n<head>\n\t<link rel=\"stylesheet\" href=\"http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css\" />\n</head>\n\n<body>\n\t<div class=\"header\">\n\t\t<mat-toolbar class=\"toolbar\">\n\t\t\t<h1 class=\"title\">Emotions map</h1>\n\t\t\t<div class=\"selectors\">\n\t\n\t\t\t\t<select *ngFor=\"let f of filters; let i=index\" [(ngModel)]=\"allFilters[i]\" class=\"filter\">\n\t\t\t\t\t<option *ngFor=\"let opt of f.options\" value={{opt.value}}>{{opt.viewValue}}</option>\n\t\t\t\t</select>\n\t\n\t\t\t\t<button (click)=\"refreshMap()\">Filter</button>\n\t\t\t</div>\n\t\t</mat-toolbar>\n\t</div>\n\t<div id=\"map\">\n\t</div>\n</body>\n\n</html>","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError, retry } from 'rxjs/operators';\n\nconst apiURL = 'http://localhost:3000';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class DatabaseAccessService {\n\n\tprivate emotions;\n\n\tconstructor(private http: HttpClient) { }\n\n\tgetAllEmotions() {\n\t\treturn this.http.get(apiURL + '/getAllEmotions', { responseType: 'json' });\n\t}\n\n\tgetSegmentByWay(way) {\n\t\treturn this.http.get(apiURL + '/getSegmentByWay/' + way, { responseType: 'json' });\n\t}\n\n\tgetEmotionsFiltered(filter: String) {\n\t\treturn this.http.get(apiURL + '/getEmotionsFiltered/' + filter, { responseType: 'json' });\n\t}\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}